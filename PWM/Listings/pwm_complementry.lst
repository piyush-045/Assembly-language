A51 MACRO ASSEMBLER  PWM_COMPLEMENTRY                                                     05/30/2025 10:30:21 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\pwm_complementry.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE pwm_complementry.asm SET(SMALL) DEBUG PRINT(.\Listings\pwm_complementry
                      .lst) OBJECT(.\Objects\pwm_complementry.obj) EP

LOC  OBJ            LINE     SOURCE

0000                   1     ORG 0000H
                       2             
                       3             
  00B3                 4     P1M1    EQU 0B3H
  00B4                 5     P1M2    EQU 0B4H
0000 75B300            6     MOV P1M1, #00000000B
0003 75B4FF            7     MOV P1M2, #11111111B
                       8     
                       9     
                      10      
                      11             
  00D8                12             PWM0CON0 EQU 0D8H  ;
  00DF                13             PWM0CON1 EQU 0DFH  ;
  00D1                14             PWM0PH EQU 0D1H    ;PWM0 PERIOD HIGH BYTE
  00D9                15             PWM0PL EQU 0D9H    ;PWM0 PERIOD LOW BYTE
  00D2                16             PWM0C0H EQU 0D2H   ;PWM0 CH0 DUTY HIGH 
  00DA                17             PWM0C0L EQU 0DAH        ;PWM0 CH0 DUTY LOW
  00D3                18             PWM0C1H EQU 0D3H   ;PWM0 CH1 DUTY HIGH 
  00DB                19             PWM0C1L EQU 0DBH   ;;PWM0 CH1 DUTY LOW 
                      20                     
  00DE                21             PIOCON0 EQU 0DEH
                      22             
  00C7                23             TA EQU 0C7H
  008E                24             CKCON EQU 08EH
  00F9                25             PWM0DTEN EQU 0F9H   ;
  00FA                26             PWM0DTCNT EQU 0FAH  ;
                      27                     
                      28     ;       AUXR4 EQU 0A3H  
                      29     ;       PWM2CON0 EQU 0C4H       
                      30     ;    PWM2PH EQU 0B9H
                      31     ;       PWM2PL EQU 0C1H
                      32     ;       PWM2C0H EQU 0BAH
                      33     ;       PWM2C0L EQU 0C2H
                      34     
                      35     ;       PWM3PH EQU 0C9H  
                      36     ;       PWM3PL EQU 0D1H
                      37     ;       PWM3C0H EQU 0CAH
                      38     ;       PWM3C0L EQU 0D2H
                      39     ;       AUXR5 EQU 0A4H
                      40     ;       PIOCON2 EQU 0B7H  
                      41     ;       PWM3CON0 EQU 0D4H       
                      42     
                      43     
                      44     
0006 110C             45     ACALL PWM_CONFIG
0008 1136             46     ACALL PWM_START
000A 80FE             47     HERE: SJMP HERE
                      48     
                      49     ;..........PWM SUBROUTINE(FUNCYION).........../
                      50     
000C                  51     PWM_CONFIG: 
000C D2DC             52     SETB PWM0CON0.4        ; 
                      53     
000E 758E00           54     MOV CKCON, #00H    ;
0011 75DF40           55     MOV PWM0CON1,#040H ; 0000 0(000) Prescal devide is 000 = 1/1 ANS ALSO COMPLEMENTRY PWM ENAB
                             LE
                      56     
A51 MACRO ASSEMBLER  PWM_COMPLEMENTRY                                                     05/30/2025 10:30:21 PAGE     2

                      57     
                      58     
                      59     
                      60     
                      61     
                      62     
                      63     
                      64     
0014 75D106           65     MOV PWM0PH,  #06H   ; High byte of PWM period (1599) ;10 KHZ FREOUNCY WITH PRESCALER 1
0017 75D93F           66     MOV PWM0PL,  #03FH  ; Low byte of PWM period
                      67     
001A 75D203           68     MOV     PWM0C0H, #03H   ;PWM0 CH0 DUTY HIGH   50% DUTY CYCLE 800
001D 75DA20           69     MOV     PWM0C0L ,#020H  ;PWM0 CH0 DUTY LOW
                      70     
                      71     
                      72                     
                      73     
                      74     ; Step 6: Enable PWM0 output pin
0020 75DE03           75     MOV PIOCON0, #03H  ; Enable PWM0 at P1.2 ,P1.1 FOR COMPLEMENTRY
0023 75C7AA           76     MOV TA,#0AAH
0026 75C755           77     MOV TA,#055H
0029 75F901           78     MOV PWM0DTEN, #01H 
002C 75C7AA           79     MOV TA,#0AAH
002F 75C755           80     MOV TA,#055H
0032 75FA10           81     MOV PWM0DTCNT, #010H     
                      82                                      
0035 22               83     RET
                      84     
0036                  85     PWM_START: 
0036 D2DE             86     SETB PWM0CON0.6        ; PWM0CON0.6 = LOAD = 1
0038 D2DF             87     SETB PWM0CON0.7        ; PWM0CON0.7 = 1 = PWMRUN 
003A 22               88     RET
                      89     
                      90     
                      91     
                      92     END
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
A51 MACRO ASSEMBLER  PWM_COMPLEMENTRY                                                     05/30/2025 10:30:21 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

CKCON. . . . . . .  N NUMB   008EH   A   
HERE . . . . . . .  C ADDR   000AH   A   
P1M1 . . . . . . .  N NUMB   00B3H   A   
P1M2 . . . . . . .  N NUMB   00B4H   A   
PIOCON0. . . . . .  N NUMB   00DEH   A   
PWM0C0H. . . . . .  N NUMB   00D2H   A   
PWM0C0L. . . . . .  N NUMB   00DAH   A   
PWM0C1H. . . . . .  N NUMB   00D3H   A   
PWM0C1L. . . . . .  N NUMB   00DBH   A   
PWM0CON0 . . . . .  N NUMB   00D8H   A   
PWM0CON1 . . . . .  N NUMB   00DFH   A   
PWM0DTCNT. . . . .  N NUMB   00FAH   A   
PWM0DTEN . . . . .  N NUMB   00F9H   A   
PWM0PH . . . . . .  N NUMB   00D1H   A   
PWM0PL . . . . . .  N NUMB   00D9H   A   
PWM_CONFIG . . . .  C ADDR   000CH   A   
PWM_START. . . . .  C ADDR   0036H   A   
TA . . . . . . . .  N NUMB   00C7H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
